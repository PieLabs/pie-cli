const marked = require('marked');
const TerminalRenderer = require('marked-terminal');
import Question from '../question';
import path from 'path';
import { fileLogger } from '../log-factory';

let logger = fileLogger(__filename);

export function match(args) {
  return args._.indexOf('clean-question') !== -1;
}

export let summary = 'clean-question - remove files generated by the `pack-question` command';

marked.setOptions({
  renderer: new TerminalRenderer()
});

export let usage = marked(`
# clean-question 
-----------------

Clean the cruft generated by pack-question 

### Examples 

\`\`\`shell 
pie-cli clean-question --dir ../path/to/dir

`);

export function run(args) {
  let dir = resolve(args.dir || process.cwd());
  let question = new Question(dir, {}, {});

  return question.clean(dir, args)
    .then(() => "clean complete")
}